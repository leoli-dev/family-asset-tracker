
import { Language, Currency } from '../types';
import { CURRENCY_FLAGS } from '../constants';

export const TRANSLATIONS = {
  [Language.EN]: {
    'app.title': 'Family Asset Tracker',
    'nav.overview': 'Overview',
    'nav.history': 'History',
    'nav.settings': 'Settings',
    'nav.newEntry': 'New Record',
    'nav.newAccount': 'New Account',
    'nav.newOwner': 'New Owner',
    'nav.newCategory': 'New Category',
    'dash.netWorth': 'Net Worth',
    'dash.assets': 'Total Assets',
    'dash.liabilities': 'Total Liabilities',
    'dash.allocation': 'Asset Allocation',
    'dash.liabilitiesDist': 'Liabilities Distribution',
    'dash.byCategory': 'By Category',
    'dash.byAccount': 'By Account',
    'dash.trend': 'Wealth Trend',
    'dash.last12Months': 'Last 12 Months',
    'dash.allTime': 'All Time',
    'dash.noData': 'No Data Yet',
    'dash.start': 'Tap "+" to add your first Account and Record.',
    'entry.title': 'Add New Entry',
    'entry.date': 'Date',
    'entry.account': 'Account',
    'entry.owner': 'Owner',
    'entry.currency': 'Currency',
    'entry.amount': 'Amount',
    'entry.category': 'Category',
    'entry.note': 'Note',
    'entry.notePlaceholder': 'Optional details...',
    'entry.save': 'Save Record',
    'entry.demo': 'Entry Disabled in Demo',
    'entry.alertDemo': 'You are currently in Demo Mode. Please exit Demo Mode in Settings to add your own data.',
    'entry.alertSaved': 'Record saved!',
    'entry.demoBanner': 'DEMO MODE: Read-only',
    'history.filter': 'Filter History',
    'history.clear': 'Clear Filters',
    'history.allAccounts': 'All Accounts',
    'history.allOwners': 'All Owners',
    'history.allCategories': 'All Categories',
    'history.noMatch': 'No records match your current filters.',
    'history.noRecords': 'No history records found.',
    'history.deleteConfirm': 'Are you sure you want to delete this record?',
    'history.demoDelete': 'You are in Demo Mode. You cannot delete demo data individually.',
    'history.page': 'Page',
    'history.of': 'of',
    'settings.prefs': 'Preferences',
    'settings.language': 'Language',
    'settings.defaultCurrency': 'Default Currency',
    'settings.currencyDesc': 'This currency will be used for dashboard aggregations.',
    'settings.data': 'Data Management',
    'settings.export': 'Export CSV',
    'settings.exportDesc': 'For Excel or Google Sheets',
    'settings.backup': 'Backup Data (JSON)',
    'settings.backupDesc': 'Save to Files, Drive or iCloud',
    'settings.restore': 'Restore Backup',
    'settings.restoreDesc': 'Import a previously saved JSON file',
    'settings.deleteAll': 'Reset / Delete All Data',
    'settings.deleteAllDesc': 'Permanently remove all records & accounts',
    'settings.deleteAllConfirm': 'WARNING: This will permanently delete ALL your data (records, accounts, categories, owners). This action cannot be undone. Are you sure?',
    'settings.deleteAllSuccess': 'All data has been deleted.',
    'settings.demoActive': 'Demo Mode Active',
    'settings.demoDesc': 'You are currently viewing sample data. To start tracking your own assets, exit demo mode. This will clear all sample data.',
    'settings.exitDemo': 'Exit Demo & Clear Data',
    'settings.restoreConfirm': 'Found {0} records. This will overwrite your current data. Continue?',
    'settings.restoreSuccess': 'Data restored successfully!',
    'settings.restoreError': 'Invalid file format.',
    'settings.parseError': 'Error parsing file.',
    'settings.manage': 'Manage Entities',
    'settings.accounts': 'Accounts',
    'settings.owners': 'Owners',
    'settings.categories': 'Categories',
    'manage.edit': 'Edit',
    'manage.delete': 'Delete',
    'manage.deleteConfirm': 'Are you sure you want to delete "{0}"?',
    'manage.inUseError': 'Cannot delete "{0}" because it is used in {1} record(s). Please delete the records first.',
    'form.update': 'Update',
    'form.create': 'Save',
  },
  [Language.FR]: {
    'app.title': 'Suivi de Patrimoine',
    'nav.overview': 'Aperçu',
    'nav.history': 'Historique',
    'nav.settings': 'Réglages',
    'nav.newEntry': 'Nouvelle Entrée',
    'nav.newAccount': 'Nouveau Compte',
    'nav.newOwner': 'Nouveau Proprio',
    'nav.newCategory': 'Nouvelle Catégorie',
    'dash.netWorth': 'Valeur Nette',
    'dash.assets': 'Total Actifs',
    'dash.liabilities': 'Total Passifs',
    'dash.allocation': 'Répartition',
    'dash.liabilitiesDist': 'Dettes',
    'dash.byCategory': 'Par Catégorie',
    'dash.byAccount': 'Par Compte',
    'dash.trend': 'Évolution',
    'dash.last12Months': '12 derniers mois',
    'dash.allTime': 'Tout',
    'dash.noData': 'Aucune donnée',
    'dash.start': 'Appuyez sur "+" pour ajouter un compte.',
    'entry.title': 'Nouvelle Entrée',
    'entry.date': 'Date',
    'entry.account': 'Compte',
    'entry.owner': 'Propriétaire',
    'entry.currency': 'Devise',
    'entry.amount': 'Montant',
    'entry.category': 'Catégorie',
    'entry.note': 'Note',
    'entry.notePlaceholder': 'Détails...',
    'entry.save': 'Enregistrer',
    'entry.demo': 'Désactivé (Démo)',
    'entry.alertDemo': 'Mode Démo actif.',
    'entry.alertSaved': 'Enregistré !',
    'entry.demoBanner': 'MODE DÉMO',
    'history.filter': 'Filtrer',
    'history.clear': 'Effacer',
    'history.allAccounts': 'Tous comptes',
    'history.allOwners': 'Tous proprios',
    'history.allCategories': 'Toutes catégories',
    'history.noMatch': 'Aucun résultat.',
    'history.noRecords': 'Aucun historique.',
    'history.deleteConfirm': 'Supprimer ?',
    'history.demoDelete': 'Mode Démo.',
    'history.page': 'Page',
    'history.of': 'sur',
    'settings.prefs': 'Préférences',
    'settings.language': 'Langue',
    'settings.defaultCurrency': 'Devise par défaut',
    'settings.currencyDesc': 'Pour les totaux.',
    'settings.data': 'Données',
    'settings.export': 'Exporter CSV',
    'settings.exportDesc': 'Excel / Sheets',
    'settings.backup': 'Sauvegarde (JSON)',
    'settings.backupDesc': 'Fichiers / Drive',
    'settings.restore': 'Restaurer',
    'settings.restoreDesc': 'Importer JSON',
    'settings.deleteAll': 'Réinitialiser / Tout supprimer',
    'settings.deleteAllDesc': 'Supprimer définitivement tout',
    'settings.deleteAllConfirm': 'ATTENTION : Ceci effacera TOUTES vos données (comptes, historiques). Irréversible. Confirmer ?',
    'settings.deleteAllSuccess': 'Données supprimées.',
    'settings.demoActive': 'Mode Démo',
    'settings.demoDesc': 'Données exemples.',
    'settings.exitDemo': 'Quitter Démo',
    'settings.restoreConfirm': '{0} entrées. Continuer ?',
    'settings.restoreSuccess': 'Restauré !',
    'settings.restoreError': 'Erreur.',
    'settings.parseError': 'Erreur.',
    'settings.manage': 'Gérer les entités',
    'settings.accounts': 'Comptes',
    'settings.owners': 'Propriétaires',
    'settings.categories': 'Catégories',
    'manage.edit': 'Modifier',
    'manage.delete': 'Supprimer',
    'manage.deleteConfirm': 'Supprimer "{0}" ?',
    'manage.inUseError': 'Impossible de supprimer "{0}" car utilisé dans {1} entrée(s).',
    'form.update': 'Mettre à jour',
    'form.create': 'Enregistrer',
  },
  [Language.ZH]: {
    'app.title': '家庭资产管家',
    'nav.overview': '概览',
    'nav.history': '明细',
    'nav.settings': '设置',
    'nav.newEntry': '记一笔',
    'nav.newAccount': '新建账户',
    'nav.newOwner': '新建成员',
    'nav.newCategory': '新建分类',
    'dash.netWorth': '净资产',
    'dash.assets': '总资产',
    'dash.liabilities': '总负债',
    'dash.allocation': '资产分布',
    'dash.liabilitiesDist': '负债分布',
    'dash.byCategory': '按分类',
    'dash.byAccount': '按账户',
    'dash.trend': '财富走势',
    'dash.last12Months': '近12个月',
    'dash.allTime': '全部时间',
    'dash.noData': '暂无数据',
    'dash.start': '点击“+”添加您的第一个账户和记录。',
    'entry.title': '新增记录',
    'entry.date': '日期',
    'entry.account': '账户',
    'entry.owner': '所有人',
    'entry.currency': '货币',
    'entry.amount': '金额',
    'entry.category': '分类',
    'entry.note': '备注',
    'entry.notePlaceholder': '选填...',
    'entry.save': '保存记录',
    'entry.demo': '演示模式',
    'entry.alertDemo': '演示模式无法保存。',
    'entry.alertSaved': '保存成功！',
    'entry.demoBanner': '演示模式：仅供阅览',
    'history.filter': '筛选明细',
    'history.clear': '清除',
    'history.allAccounts': '所有账户',
    'history.allOwners': '所有成员',
    'history.allCategories': '所有分类',
    'history.noMatch': '没有记录。',
    'history.noRecords': '暂无记录。',
    'history.deleteConfirm': '确定删除？',
    'history.demoDelete': '演示模式无法删除。',
    'history.page': '页',
    'history.of': '/',
    'settings.prefs': '偏好设置',
    'settings.language': '语言',
    'settings.defaultCurrency': '默认货币',
    'settings.currencyDesc': '用于统计总额。',
    'settings.data': '数据管理',
    'settings.export': '导出 CSV',
    'settings.exportDesc': 'Excel / Sheets',
    'settings.backup': '备份数据 (JSON)',
    'settings.backupDesc': '保存到文件',
    'settings.restore': '恢复备份',
    'settings.restoreDesc': '导入 JSON',
    'settings.deleteAll': '重置 / 删除所有数据',
    'settings.deleteAllDesc': '永久删除所有记录、账户和分类',
    'settings.deleteAllConfirm': '警告：此操作将永久删除您的所有数据（记录、账户、分类、成员）。此操作不可撤销。您确定吗？',
    'settings.deleteAllSuccess': '所有数据已删除。',
    'settings.demoActive': '演示模式',
    'settings.demoDesc': '正在查看示例。',
    'settings.exitDemo': '退出演示',
    'settings.restoreConfirm': '覆盖 {0} 条数据？',
    'settings.restoreSuccess': '恢复成功！',
    'settings.restoreError': '格式错误。',
    'settings.parseError': '解析错误。',
    'settings.manage': '管理项目',
    'settings.accounts': '账户列表',
    'settings.owners': '成员列表',
    'settings.categories': '分类列表',
    'manage.edit': '修改',
    'manage.delete': '删除',
    'manage.deleteConfirm': '确定要删除“{0}”吗？',
    'manage.inUseError': '无法删除“{0}”，因为它已被 {1} 条记录使用。请先删除相关记录。',
    'form.update': '更新',
    'form.create': '保存',
  }
};

export const CURRENCY_NAMES: Record<Language, Record<Currency, string>> = {
  [Language.EN]: {
    [Currency.USD]: 'US Dollar',
    [Currency.EUR]: 'Euro',
    [Currency.JPY]: 'Japanese Yen',
    [Currency.GBP]: 'British Pound',
    [Currency.CNY]: 'Chinese Yuan',
    [Currency.AUD]: 'Australian Dollar',
    [Currency.CAD]: 'Canadian Dollar',
    [Currency.CHF]: 'Swiss Franc',
    [Currency.HKD]: 'Hong Kong Dollar',
    [Currency.SGD]: 'Singapore Dollar',
    [Currency.SEK]: 'Swedish Krona',
    [Currency.KRW]: 'South Korean Won',
    [Currency.NOK]: 'Norwegian Krone',
    [Currency.NZD]: 'New Zealand Dollar',
    [Currency.INR]: 'Indian Rupee',
    [Currency.MXN]: 'Mexican Peso',
    [Currency.TWD]: 'New Taiwan Dollar',
    [Currency.ZAR]: 'South African Rand',
    [Currency.BRL]: 'Brazilian Real',
    [Currency.DKK]: 'Danish Krone',
    [Currency.PLN]: 'Polish Zloty',
    [Currency.THB]: 'Thai Baht',
    [Currency.IDR]: 'Indonesian Rupiah',
    [Currency.MYR]: 'Malaysian Ringgit',
    [Currency.VND]: 'Vietnamese Dong'
  },
  [Language.FR]: {
    [Currency.USD]: 'Dollar américain',
    [Currency.EUR]: 'Euro',
    [Currency.JPY]: 'Yen japonais',
    [Currency.GBP]: 'Livre sterling',
    [Currency.CNY]: 'Yuan chinois',
    [Currency.AUD]: 'Dollar australien',
    [Currency.CAD]: 'Dollar canadien',
    [Currency.CHF]: 'Franc suisse',
    [Currency.HKD]: 'Dollar de Hong Kong',
    [Currency.SGD]: 'Dollar de Singapour',
    [Currency.SEK]: 'Couronne suédoise',
    [Currency.KRW]: 'Won sud-coréen',
    [Currency.NOK]: 'Couronne norvégienne',
    [Currency.NZD]: 'Dollar néo-zélandais',
    [Currency.INR]: 'Roupie indienne',
    [Currency.MXN]: 'Peso mexicain',
    [Currency.TWD]: 'Nouveau dollar de Taïwan',
    [Currency.ZAR]: 'Rand sud-africain',
    [Currency.BRL]: 'Réal brésilien',
    [Currency.DKK]: 'Couronne danoise',
    [Currency.PLN]: 'Złoty polonais',
    [Currency.THB]: 'Baht thaïlandais',
    [Currency.IDR]: 'Roupie indonésienne',
    [Currency.MYR]: 'Ringgit malaisien',
    [Currency.VND]: 'Dong vietnamien'
  },
  [Language.ZH]: {
    [Currency.USD]: '美元',
    [Currency.EUR]: '欧元',
    [Currency.JPY]: '日元',
    [Currency.GBP]: '英镑',
    [Currency.CNY]: '人民币',
    [Currency.AUD]: '澳元',
    [Currency.CAD]: '加拿大元',
    [Currency.CHF]: '瑞士法郎',
    [Currency.HKD]: '港币',
    [Currency.SGD]: '新加坡元',
    [Currency.SEK]: '瑞典克朗',
    [Currency.KRW]: '韩元',
    [Currency.NOK]: '挪威克朗',
    [Currency.NZD]: '新西兰元',
    [Currency.INR]: '印度卢比',
    [Currency.MXN]: '墨西哥比索',
    [Currency.TWD]: '新台币',
    [Currency.ZAR]: '南非兰特',
    [Currency.BRL]: '巴西雷亚尔',
    [Currency.DKK]: '丹麦克朗',
    [Currency.PLN]: '波兰兹罗提',
    [Currency.THB]: '泰铢',
    [Currency.IDR]: '印尼盾',
    [Currency.MYR]: '马来西亚林吉特',
    [Currency.VND]: '越南盾'
  }
};

export const t = (key: string, lang: Language, params?: any[]): string => {
  const dict = TRANSLATIONS[lang] || TRANSLATIONS[Language.EN];
  let str = (dict as any)[key] || key;
  if (params) {
      params.forEach((param, index) => {
          str = str.replace(`{${index}}`, String(param));
      });
  }
  return str;
};

export const getCurrencyLabel = (currency: Currency, language: Language): string => {
  const flag = CURRENCY_FLAGS[currency] || '';
  const name = CURRENCY_NAMES[language][currency] || currency;
  return `${flag} ${currency} - ${name}`;
};
